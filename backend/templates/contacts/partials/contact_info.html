<div x-data="{ editing: false }">
    <div class="flex items-center justify-between mb-4">
        <h2 class="text-lg font-semibold text-gray-900 dark:text-white">Datos de Contacto</h2>
        <button @click="editing = !editing"
                class="text-sm text-primary-600 dark:text-primary-400 hover:underline">
            <span x-show="!editing">Editar</span>
            <span x-show="editing">Cancelar</span>
        </button>
    </div>

    <!-- View Mode -->
    <div x-show="!editing" class="space-y-4">
        <div>
            <p class="text-sm text-gray-500 dark:text-gray-400">Nombre</p>
            <p class="font-medium text-gray-900 dark:text-white">{{ contact.nombre|default:"Sin nombre" }}</p>
        </div>
        <div>
            <p class="text-sm text-gray-500 dark:text-gray-400">Telefono Principal</p>
            <a href="tel:{{ contact.telefono }}" class="font-medium text-primary-600 dark:text-primary-400 hover:underline">
                {{ contact.telefono }}
            </a>
        </div>
        {% if contact.telefono2 %}
        <div>
            <p class="text-sm text-gray-500 dark:text-gray-400">Telefono Secundario</p>
            <a href="tel:{{ contact.telefono2 }}" class="font-medium text-primary-600 dark:text-primary-400 hover:underline">
                {{ contact.telefono2 }}
            </a>
        </div>
        {% endif %}
        <div>
            <p class="text-sm text-gray-500 dark:text-gray-400">Email</p>
            {% if contact.email %}
            <a href="mailto:{{ contact.email }}" class="font-medium text-primary-600 dark:text-primary-400 hover:underline">
                {{ contact.email }}
            </a>
            {% else %}
            <p class="text-gray-400 dark:text-gray-500">No especificado</p>
            {% endif %}
        </div>
    </div>

    <!-- Edit Mode -->
    <form x-show="editing" x-cloak
          hx-post="{% url 'leads:contact_update' contact.id %}"
          hx-target="#contact-info-card"
          hx-swap="innerHTML"
          class="space-y-4">
        {% csrf_token %}
        <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Nombre</label>
            <input type="text" name="nombre" value="{{ contact.nombre|default:'' }}"
                   class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Telefono Secundario</label>
            <input type="text" name="telefono2" value="{{ contact.telefono2|default:'' }}"
                   placeholder="Ej: 666777888"
                   class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-primary-500">
        </div>
        <div>
            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Email</label>
            <input type="email" name="email" value="{{ contact.email|default:'' }}"
                   placeholder="ejemplo@email.com"
                   class="w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 focus:ring-2 focus:ring-primary-500">
        </div>
        <input type="hidden" name="notas" value="{{ contact.notas|default:'' }}">
        <div class="flex justify-end">
            <button type="submit"
                    class="px-4 py-2 bg-primary-600 hover:bg-primary-700 text-white text-sm rounded-lg transition-colors">
                Guardar Cambios
            </button>
        </div>
    </form>
</div>
